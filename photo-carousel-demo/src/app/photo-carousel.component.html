<section
  class="carousel"
  role="region"
  [attr.aria-label]="ariaLabel || 'Photo carousel'"
  (keydown)="onKeydown($event)"
  >
  <div class="viewport">
    <button mat-fab class="nav left" (click)="prev()" [disabled]="!canPrev()" aria-label="Previous slide">
      <mat-icon>chevron_left</mat-icon>
    </button>

    <div #track
      class="track"
      role="listbox"
      [attr.aria-activedescendant]="'slide-' + currentIndex()"
      (scroll)="onScroll()"
      (pointerdown)="onPointerDown($event)"
      (pointerup)="onPointerUp($event)"
      (pointercancel)="onPointerCancel()"
      (pointerleave)="onPointerCancel()"
    >
    <article
        *ngFor="let img of images; let i = index"
        class="slide"
        role="option"
        [id]="'slide-' + i"
        [attr.aria-selected]="i === currentIndex()"
        [style.scrollSnapAlign]="'center'"
    >
          <img
            [ngSrc]="img.src"
            [alt]="img.alt || 'Photo ' + (i + 1)"
            [width]="img.width || 1"
            [height]="img.height || 1"
            [priority]="i === 0"
            (load)="onImageLoad(i)"
          />
          @if (img.caption) {
            <footer class="caption">{{ img.caption }}</footer>
          }
        </article>
      </div>

      <button mat-fab class="nav right" (click)="next()" [disabled]="!canNext()" aria-label="Next slide">
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>

    <div class="dots" role="tablist" aria-label="Slides">
      <button
        *ngFor="let _ of images; let i = index"
        mat-button
        class="dot"
        [class.active]="i === currentIndex()"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
        (click)="goTo(i)"
      >
        <span class="dot-visual" aria-hidden="true"></span>
      </button>
    </div>
  </section>
